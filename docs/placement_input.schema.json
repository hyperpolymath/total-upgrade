{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PlacementDecisionInput",
  "type": "object",
  "properties": {
    "operation_id": {"type": "string"},
    "package_id": {"type": "string"},
    "intent": {
      "type": "string",
      "enum": ["gui_app", "cli_tool", "service", "toolchain", "library", "firmware", "other"]
    },
    "profile": {"type": "string", "enum": ["zero_trace", "state_vault", "multi_version", "default"]},
    "candidates": {"type": "array", "items": {"type": "string"}},
    "candidate_tags": {
      "type": "object",
      "additionalProperties": {"type": "array", "items": {"type": "string"}}
    },
    "candidate_meta": {
      "type": "object",
      "additionalProperties": {"type": "object"}
    },
    "scores": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": {"type": "number"}
      }
    },
    "environment": {
      "type": "object",
      "properties": {
        "os_family": {"type": "string"},
        "os_name": {"type": "string"},
        "os_like": {"type": "string"},
        "wsl": {"type": "boolean"},
        "container": {"type": "boolean"},
        "virtual_machine": {"type": "boolean"},
        "minix": {"type": "boolean"}
      },
      "additionalProperties": {"type": ["string", "number", "boolean"]}
    },
    "user_override": {"type": "boolean"},
    "override_reason": {"type": ["string", "null"]},
    "cost_risk": {"type": "string"},
    "dry_run": {"type": "boolean"},
    "result": {"type": "string"},
    "state_paths": {"type": "array", "items": {"type": "string"}}
  },
  "required": ["package_id", "intent", "candidates"],
  "additionalProperties": true
}
